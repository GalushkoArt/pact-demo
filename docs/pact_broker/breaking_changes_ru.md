---
title: Планируемые критические изменения в версии 3.0
---

## Изменения в наименованиях

* Переименовать `pacticipant` в `application` (масштабное)
* Переименовать "failed" в "failure" (незначительное)

## Удаление устаревшего/заменённого/избыточного функционала

* Удалить устаревшие связи без префикса `pb` (незначительное)
* Удалить опцию сортировки по семантической версии (незначительное)
* Прекратить поддержку нечувствительности к регистру в названиях ресурсов (незначительное)
* Прекратить поддержку модификации контрактов? (незначительное)
* Запретить изменение результатов верификации (среднее)
* Прекратить поддержку режима "proxy badge provider" (незначительное)
* Удалить избыточные эндпоинты создания webhook'ов (незначительное)
* Удалить устаревшие эндпоинты публикации контрактов (незначительное)
* Удалить устаревший JSON в эндпоинте pacticipants (незначительное)
* Многие коллекции содержат и `_link`, и `_embedded` — можно ли отказаться от `_link`?
* Удалить `embedded latestVersion` из ресурса pacticipant (незначительное)

## Улучшения API

* Привести все ответы об ошибках к формату `problem+json` (среднее)
* Сделать поведение PUT/PATCH единообразным для всех ресурсов (масштабное)
* Включить пагинацию по умолчанию для всех коллекций и добавить валидацию параметров пагинации (среднее)
* Придумать единый подход к наименованию верхнеуровневого элемента в коллекции (например, использовать доменное имя `pacticipants` или универсальное `items`) (среднее)
* Разработать единый подход к управлению включением встроенных ресурсов (embedded) (среднее)

## Изменения в базе данных

* Сделать nullable внешние ключи обязательными (not-null)  
  _(Для обратной совместимости внешние ключи в существующих таблицах изначально делались nullable, но для обеспечения целостности данных нужно сделать их обязательными. Это требует major-версии.)_ (среднее)
* Прекратить даже формальную поддержку MySQL — удалить все тесты и упоминания о MySQL

## Исправления багов/неудачных решений, являющиеся критическими изменениями

* Сделать поле `providerVersionBranch` обязательным в `PactsForVerificationJSONQuerySchema` (незначительное)
* Запретить пустые значения в matrix-запросах — невозможно понять, задал ли пользователь значение явно или клиент делает это всегда (незначительное)
* Добавить имя pacticipant в URL эндпоинта публикации контракта (незначительное, но требует изменений на стороне клиентов)
* Встроить pacticipants в декоратор интеграции
* Удалить избыточную коллекцию `branches` из matrix-декоратора (оставить только версии веток)
* Удалить избыточную коллекцию `branches` из version-декоратора
* Переместить `buildUrl` из version в публикацию контракта и верификацию (среднее)
* Добавить префикс `pb:` к связям (relations) в `webhook_execution_result_decorator.rb`

## Прочее

* Запретить JSON-запросы, где тело — массив (Beth не может вспомнить, зачем это вообще сейчас разрешено)
